<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>Git kullanımı</title>
<link rel="stylesheet" href="main.css" />
<link rel="stylesheet" href="main.css" />
</head>
<body>
<main id="git-kullanimi">
<h1 class="title">Git kullanımı</h1>

<p>Bu dokümanda sürüm kontrol sistemi olan git komutu nasıl kullanılır anlatılacakdır.</p>
<section id="git-kurulumu">
<h2>Git kurulumu</h2>
<p>git kurulumu debian tabanlı dağıtımlar için aşağıdaki komut kullanılarak kurulabilir.</p>
<pre class="code shell literal-block"><code>$ apt install git-core</code></pre>
<p>Kaynak koddan derlemek için öncelikle git kaynak kodunu indirip bizine açalım.
Ardından aşağıdaki adımları uygulayarak derleyelim ve kuralım.</p>
<pre class="code shell literal-block"><code>./configure --prefix<span class="operator">=</span>/usr
make
make install</code></pre>
</section>
<section id="git-ne-ise-yarar">
<h2>Git ne işe yarar</h2>
<p>Git yazdığımız kodların sürüm takibini yapmamızı sağlayan bir araçtır.
Bu sayede kod yazarken önceki değişiklikleri kaybetmeden düzenli bir şekilde kodda yaptığımız değişiklikleri görebilir ve ihtiyaç duyulduğunda eski sürümlere dönülebilir.
Ayrıca git sayesinde yazdığımız kodu git sunucuları (github, gitlab vb) kullanarak paylaşmak mümkündür.</p>
</section>
<section id="git-kullanarak-kaynak-kodun-indirilmesi">
<h2>Git kullanarak kaynak kodun indirilmesi</h2>
<p>Git kullanarak kaynak kodu bilgisayarımıza indirmek için <cite>git clone</cite> komutundan faydalanılır.
Bu komut git sunucusundan yapılan tüm değişiklikler ile beraber indirir.
Eğer belli miktarda değişiklikle indirmek isterseniz <strong>--depth=</strong> parametresi eklenmelidir.</p>
<pre class="code shell literal-block"><code><span class="comment single"># sadece son değişikliği almak için --depth=1 eklendi.
</span>$ git clone https://gitlab.com/sulincix/sayfalar.git --depth<span class="operator">=</span><span class="literal number">1</span></code></pre>
<p>İndrilen kodun istediğiniz bir dizine indirilmesini istiyorsanız komutun sonuna istenilen konumu yazmanız gereklidir.</p>
<pre class="code shell literal-block"><code>$ git clone https://gitlab.com/sulincix/sayfalar.git ~/Belgeler/sayfalar</code></pre>
</section>
<section id="eski-degisiklikleri-gormek-ve-eski-surume-donmek">
<h2>Eski değişiklikleri görmek ve eski sürüme dönmek</h2>
<p><cite>git log</cite> komutunu kullanarak eski değişiklikleri görebilirsiniz. Bu yapılan değişiklikler <strong>commit</strong> olarak adlandırılır.
Yazının bundan sonraki kısmında <strong>commit</strong> sözcüğü kullanılacaktır.</p>
<p>Her commitin bir id değeri bulunur. Bu değer kullanılarak eski sürüme dönülebilir.</p>
<pre class="code shell literal-block"><code>$ git log
-&gt; commit a983f37db618a06a53adb593dd97aa0282775ef5 <span class="operator">(</span>HEAD -&gt; master, origin/master, origin/HEAD<span class="operator">)</span>
-&gt; Author: aliriza &lt;aliriza.keskin&#64;pardus.org.tr&gt;
-&gt; Date:   Mon Oct <span class="literal number">10</span> <span class="literal number">08</span>:31:30 <span class="literal number">2022</span> +0000
-&gt;
-&gt;     commit <span class="literal number">2</span>
-&gt;
-&gt; commit 180a8bcaf81485958fded6a69c97d15161fd1b75
-&gt; Author: aliriza &lt;aliriza.keskin&#64;pardus.org.tr&gt;
-&gt; Date:   Tue Sep <span class="literal number">27</span> <span class="literal number">10</span>:11:12 <span class="literal number">2022</span> +0000
-&gt;
-&gt;     commit <span class="literal number">1</span>
...</code></pre>
<p>Burada eski sürüme dönmek için <cite>git reset &lt;commit-id&gt;</cite> komutu kullanılır.
Bu komut kodda yapılan değişiklikleri silmeyip git içerisinde eski sürüme dönmeyi sağlar.
Eğer git üzerinde yaptığınız değişiklikleri de geri almak isterseniz <cite>--hard</cite> parametresini kullanabilirsiniz.
Bu parametre tehlikelidir çünkü yazdığınız kodu geri dönülemez şekilde siler.</p>
<p>Ayrıca commit id yerine <cite>HEAD~n</cite> kullanarak <strong>n</strong> sayıda önceki commite geri dönebilirsiniz.</p>
<pre class="code shell literal-block"><code><span class="comment single"># belirtilen commit-id değerine göre eski sürüme dönmek için (hard reset)
</span>$ git reset 180a8bcaf81485958fded6a69c97d15161fd1b75 --hard
<span class="comment single"># belirtilen sayıda eski sürüme dönmek için (reset)
</span>$ git reset HEAD~2</code></pre>
</section>
<section id="sunucudaki-guncel-degisiklikleri-almak">
<h2>Sunucudaki güncel değişiklikleri almak</h2>
<p>Sunucudaki değişiklikleri <cite>git pull</cite> komutu ile alabiliriz.
Bu komut sunucu tarafında yapılan değişiklikleri yereldeki git deposuna ekleyecektir.</p>
<pre class="code shell literal-block"><code>$ git pull</code></pre>
</section>
<section id="yeni-commit-olusturma">
<h2>Yeni commit oluşturma</h2>
<p>Kaynak kodda yaptığımız değişiklikleri yeni bir commit olarak oluşturmak için <cite>git commit</cite> komutu kullanılır.
Bunun için öncelikle hangi dosyaları değiştirdiysek <cite>git add</cite> komutu ile belirtemiz gerekir.
Daha sonra <cite>git checkout</cite> komutu ile yapılan değişikliklerin düzgün bir şekilde algılandığından emin olunur.
Son olarak <cite>git commit</cite> komutu ile yeni commit oluşturulur.</p>
<p>git commit komutu doğrudan çalıştırıldığında metin düzenleyici ile commit mesajı düzenleme ekranı çalıştırılır.
Eğer bu ekranı kullanmak yerine parametre ile belirtmek istereniz <strong>-m</strong> parametresi eklemelisiniz.</p>
<pre class="code shell literal-block"><code>$ git add rst/git-kullanimi.rst
$ git checkout
-&gt; M    rst/git-kullanimi.rst
$ git commit -m <span class="literal string double">&quot;commit mesajı&quot;</span></code></pre>
<p>commit mesajı düzenleyici <strong>EDITOR</strong> çevreler değişkeni ile belirlenir. Genellikle varsayılan olarak vim kullanılır.
Bunu değiştirmek için <strong>~/.bashrc</strong> içerisinde aşağıdaki gibi tanımlama yapabilirsiniz.</p>
<pre class="code shell literal-block"><code><span class="name builtin">export</span> <span class="name variable">EDITOR</span><span class="operator">=</span>nano</code></pre>
<p>Commit mesajını değiştirmek için <cite>git commit --amend</cite> komutunu kullanabilirsiniz.</p>
<p>Yeni commit oluşturduktan sonra <strong>HEAD</strong> ve <strong>origin</strong> artık aynı committe olmayacaktır.
Burada HEAD sizin yerel olarak bulundurduğunuz halini origin ise git sunucusundaki halini gösterir.</p>
<pre class="code shell literal-block"><code>$ git log
-&gt; commit 03d5176f5e5b46e43dd688fd7b884a58e60afcd4 <span class="operator">(</span>HEAD -&gt; master<span class="operator">)</span>
-&gt; Author: aliriza &lt;aliriza.keskin&#64;pardus.org.tr&gt;
-&gt; Date:   Mon Jan <span class="literal number">9</span> <span class="literal number">11</span>:09:02 <span class="literal number">2023</span> +0300
-&gt;
-&gt;     commit <span class="literal number">2</span>
-&gt;
-&gt; commit 913d993457d7b07e81746088fbc7cf6aaf9bc01a <span class="operator">(</span>origin/master, origin/HEAD<span class="operator">)</span>
-&gt; Author: aliriza &lt;aliriza.keskin&#64;pardus.org.tr&gt;
-&gt; Date:   Tue Dec <span class="literal number">27</span> <span class="literal number">16</span>:44:49 <span class="literal number">2022</span> +0300
-&gt;
-&gt;     commit <span class="literal number">1</span></code></pre>
</section>
<section id="git-sunucusuna-gonderme">
<h2>Git sunucusuna gönderme</h2>
<p>Yaptığımız değişiklikleri git sunucusuna göndermek için <cite>git push</cite> komutu kullanılır.
Sunucu sizden kullanıcı adı ve parola ile doğrulama isteyebilir.
Sunucuya ssh anahtarı eklediyseniz ve ssh üzerinden kullanıyorsanız genellikle doğrulama yapılırken parolaya gerek duyulmaz.</p>
<p><strong>Not:</strong> github 13 Ağustos 2021 tarihinde https üzerinden commit göndermeyi engellemeye başladı.
Parolanız yerine githubdan sağlayacağınız token değerini girmeniz gerekmektedir.
Github kullanıyorsanız ssh anahtarı ile kullanmanızı öneririm.</p>
<pre class="code shell literal-block"><code>$ git push
-&gt; Username <span class="keyword">for</span> <span class="literal string single">'https://gitlab.com'</span>: sulincix
-&gt; Password <span class="keyword">for</span> <span class="literal string single">'https://sulincix&#64;gitlab.com'</span>:
-&gt; Enumerating objects: <span class="literal number">3</span>, <span class="keyword">done</span>.
-&gt; Counting objects: <span class="literal number">100</span>% <span class="operator">(</span><span class="literal number">3</span>/3<span class="operator">)</span>, <span class="keyword">done</span>.
-&gt; Writing objects: <span class="literal number">100</span>% <span class="operator">(</span><span class="literal number">3</span>/3<span class="operator">)</span>, <span class="literal number">205</span> bytes <span class="punctuation">|</span> <span class="literal number">205</span>.00 KiB/s, <span class="keyword">done</span>.
-&gt; Total <span class="literal number">3</span> <span class="operator">(</span>delta <span class="literal number">0</span><span class="operator">)</span>, reused <span class="literal number">0</span> <span class="operator">(</span>delta <span class="literal number">0</span><span class="operator">)</span>, pack-reused <span class="literal number">0</span>
-&gt; remote: . Processing <span class="literal number">1</span> references
-&gt; remote: Processed <span class="literal number">1</span> references <span class="keyword">in</span> total
-&gt; To https://gitlab.com/sulincix/git-dersi.git
-&gt;    1ac2e12..2742a1f  master -&gt; master</code></pre>
<p>Eğer sunucusunda daha önceden yaptığınız değişiklikler varsa ve sizin yaptığınız değişiklikler ile çakışıyorsa <cite>git push</cite> komutu hata verecektir.
Bu duruma <strong>conflict</strong> adı verilir. Conflict çözmek için öncelikle <strong>git pull --rebase</strong> komutu kullanılır.</p>
<pre class="code shell literal-block"><code>git push
-&gt; Username <span class="keyword">for</span> ...
-&gt; Password <span class="keyword">for</span> ...
-&gt; To https://gitlab.com/sulincix/git-dersi.git
-&gt;  ! <span class="operator">[</span>rejected<span class="operator">]</span>        master -&gt; master <span class="operator">(</span>fetch first<span class="operator">)</span></code></pre>
<p>Yukarıdaki örnekde <cite>git push</cite> komutunu sunucudaki değişiklikleri almadan çalıştırdığımız için bize önce <cite>git pull</cite> komutu kullanarak değişiklikleri almamız söyleniyor.</p>
<pre class="code shell literal-block"><code>$ git pull --rebase
...
-&gt; From https://gitlab.com/sulincix/git-dersi.git
-&gt;    61e3643..e2fe24f  master     -&gt; origin/master
-&gt; Auto-merging commit <span class="literal number">3</span>
-&gt; CONFLICT <span class="operator">(</span>add/add<span class="operator">)</span>: Merge conflict <span class="keyword">in</span> commit <span class="literal number">3</span>
-&gt; error: could not apply abaf641... commit <span class="literal number">3</span>
...</code></pre>
<p>Conflict durumunda <strong>rebase</strong> moduna geçilir. Bu modda çakışan dosyalarda hangisinin seçileceğine karar verilir.
Çakışan dosyalar aşağıdaki gibi hal alır. Burada çakışma giderildikten sonra yeni bir commit oluşturmanız gerekmektedir.</p>
<pre class="code shell literal-block"><code>...
<span class="operator">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD
print<span class="operator">(</span><span class="literal string double">&quot;hello world&quot;</span><span class="operator">)</span>
<span class="operator">=======</span>
print<span class="operator">(</span><span class="literal string double">&quot;hi world&quot;</span><span class="operator">)</span>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; abaf641 <span class="operator">(</span>aaa<span class="operator">)</span>
...</code></pre>
<p>Burada iki değişiklikten hangisinin kalması isteniyorsa o tutulur diğerleri silinir.
Daha sonrasında yeni commit oluşturulur Yukarıdaki örnekte son hali aşağıdaki gibi olmalıdır.</p>
<pre class="code shell literal-block"><code>...
print<span class="operator">(</span><span class="literal string double">&quot;hello world&quot;</span><span class="operator">)</span>
...</code></pre>
<p>Çakışma giderildikten sonra yeni commit oluşturup gönderebiliriz.</p>
<pre class="code shell literal-block"><code>$ git add main.py
$ git commit -m <span class="literal string double">&quot;Çakışma giderildi&quot;</span></code></pre>
<p>Çakışma giderildikten sonra rebase durumundan çıkmak için <cite>git rebase --continue</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code>$ git rebase --continue
-&gt; Successfully rebased and updated refs/heads/master.</code></pre>
<p>Ardından git push komutu ile sunucuya gönderilir.</p>
<pre class="code shell literal-block"><code>$ git push
-&gt; To https://gitlab.com/sulincix/git-dersi.git
-&gt;    e2fe24f..19361f6  master -&gt; master</code></pre>
<p>Eğer rebase yapmaktan vazgeçmek istiyorsanız <cite>git rebase --abort</cite> kullanmanız gerekir. Bu sayede rebase işleminden çıkılır.</p>
<!-- code/block:: shell

$ git rebase - -abort -->
<p>Eğer sunucuya değişiklikleri zorla göndermek için <strong>--force</strong> parametresi kullanılır.
Bu işlem sunucudaki değişiklikleri silip yerine yereldeki değişikliklerin atılmasını sağlar.</p>
<p><strong>Not:</strong> Bu işlem sonucunda sunucuda bulunan değişiklikler silindiği için tehlikelidir. <strong>Daha önemlisi arkadaşlarınız size küfür edebilir :D</strong>
Mümkünse hiç force push yapmayın.</p>
</section>
<section id="branch-kavrami">
<h2>Branch kavramı</h2>
<p>Git üzerinde birden çok dal ile çalışmak mümkündür. Bu dallar <strong>branch</strong> sözcüğü ile ifade edilir.
Bu sadece koda yeri bir özelliği geliştirirken farklı bir dal kullanıp kodun stabil çalışan halini kullancak kişiler için korumanız mümkündür.</p>
<p>Mecut branchları görüntülemek için <cite>git branch</cite> komutu kullanılır. Varsayılan branch adımız genellikle <strong>master</strong> olarak tanımlıdır.</p>
<pre class="code shell literal-block"><code>$ git branch
-&gt; * master</code></pre>
<p>Yeni bir branch oluşturmak için <cite>git branch &lt;dal-adı&gt;</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code><span class="comment single"># yeni branch oluşturalım
</span>$ git branch development
<span class="comment single"># branch listeleyelim
</span>$ git branch
-&gt;   development
-&gt; * master</code></pre>
<p>Yukarıdaki örnekte mevcut bulunduğumuz branch başında * işareti bulunmaktadır.
Bulunduğumuz branchı değiştirmek için <cite>git switch &lt;dal-adı&gt;</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code>$ git switch development
-&gt; Switched to branch <span class="literal string single">'development'</span>
$ git branch
-&gt; * development
-&gt;   master</code></pre>
<p>Dallarda yapılan değişiklikleri birleştirmek için <cite>git merge &lt;dal1&gt; &lt;dal2&gt;</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code>$ git merge development master</code></pre>
<p>Sunucuya değişikliklerimizi istenilen dalda göndermek için <cite>git push &lt;remote-adı&gt; &lt;dal-adı&gt;</cite> kullanılır.</p>
<pre class="code shell literal-block"><code><span class="comment single"># master branchına geçelim
</span>$ git switch master
<span class="comment single"># development branchını sunucuya yollayalım.
</span>$ git push origin development</code></pre>
<p>Branch silmek için <cite>git branch -d &lt;dal-adı&gt;</cite> komutunu kullanabilirsiniz. Bulunduğunuz dalı silemezsiniz. ( Bindiğiniz dalı kesemediğiniz gibi:D )</p>
<pre class="code shell literal-block"><code><span class="comment single"># önce diğer brancha geçelim
</span>$ git switch master
<span class="comment single"># development branchını silelim
</span>$ git branch -d development</code></pre>
<p>Bir branchı yeniden adlandırmak için <cite>git branch --move &lt;eski-ad&gt; &lt;yeni-ad&gt;</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code><span class="comment single"># bir branch oluşturalım.
</span>$ git branch dev
<span class="comment single"># yeniden adlandıralım.
</span>$ git branch --move dev development</code></pre>
</section>
<section id="remote-kavrami">
<h2>Remote kavramı</h2>
<p>Git üzerinde birden çok sunucu tanımlanabilir ve bunlardan istenilene veri alınıp verilebilir. Bu sunucular <strong>remote</strong> sözcüğü ile ifade edilir.</p>
<p>Mevcut remote listesi için <cite>git remote</cite> komutu kullanılır. varsayılan remote adı genellikle <strong>origin</strong> olarak tanımlanır.</p>
<pre class="code shell literal-block"><code>$ git remote
-&gt; origin</code></pre>
<p>Bir remotenin hangi adreste olduğunu öğrenmek için <cite>git remote get-url &lt;remote-adı&gt;</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code>$ git remote get-url origin
-&gt; https://gitlab.com/sulincix/sayfalar.git</code></pre>
<p>Remotenin adresini değiştirmek için ise <cite>git remote set-url &lt;remote-adı&gt; &lt;yeni-adres&gt;</cite> kullanılır.</p>
<pre class="code shell literal-block"><code>$ git remote set-url origin https://gitlab.com/sulincix/git-dersi.git</code></pre>
<p>Yeni bir remote eklemek için ise <cite>git remote add &lt;remote-adı&gt; &lt;adres&gt;</cite> kullanılır.</p>
<pre class="code shell literal-block"><code>$ git remote add github https://github.com/sulincix/sayfalar.git
$ git remote
-&gt; origin
-&gt; github</code></pre>
<p>Remote üzerinden değişiklikleri alıp vermek için <cite>git pull &lt;remote-adı&gt;</cite> ve <cite>git push &lt;remote-adı&gt;</cite> kullanılır.</p>
<pre class="code shell literal-block"><code><span class="comment single"># Değişiklikleri alalım
</span>$ git pull github
<span class="comment single"># diğer remote üzerine gönderelim.
</span>$ git push origin</code></pre>
<p>Bir remoteyi silmek için <cite>git remote remove &lt;remote-adı&gt;</cite> komutu kullanılır.
Yeniden adlandırmak için ise <cite>git remote rename &lt;eski-ad&gt; &lt;yeni-ad&gt;</cite> komutu kullanılır.</p>
<pre class="code shell literal-block"><code><span class="comment single"># yeniden adlandıralım.
</span>$ git remote rename github git
<span class="comment single"># remote silelim
</span>$ git remote remove git</code></pre>
</section>
<section id="squash-commit-kavrami">
<h2>Squash commit kavramı</h2>
<p>Bazen git üzerinde farklı bir branch üzerinde geliştirme yaparken çok fazla miktarda commit ürettiğinizde bunları ana branch üzerine birleştirirken birsürü committen oluşması yerine tek bir commit haline getirmek isteyebilirsiniz.
Bu gibi durumlarda commitleri birleştirerek <strong>squash commit</strong> elde edebilirsiniz. Bunun için rebase module geçmemiz gerekmektedir.</p>
<p>İlk olarak <cite>git rebase -i &lt;commit-id&gt;</cite> komutu ile rebase moduna geçelim. burada <strong>-i</strong> parametresi commitleri birleştirmemiz için metin düzenleyicimizde bir ekran açacaktır.</p>
<pre class="code shell literal-block"><code><span class="comment single"># rebase moduna geçelim.
</span>$ git rebase -i HEAD~5
<span class="comment single"># metin düzenleyicimizde aşağıdaki gibi metin bulunur.
</span>pick aa34d35 commit <span class="literal number">5</span>
pick 879917e commit <span class="literal number">4</span>
pick 864dc97 commit <span class="literal number">3</span>
...</code></pre>
<p>Yukarıdaki örnekte <strong>pick</strong> ile belirtilen commitleri <strong>squash</strong> olarak değiştirirseniz commit bir önceki commit ile birleştirilmiş olur.
Diğer komutlar düzenleyicide altta açıklama satırı olarak yer almaktadır.</p>
<p>Düzenleyicide kaydedip çıktıktan sonra bu sefer commit mesajı ekranı ile karşılaşırız. Burada birleştirilmiş commit mesajını yazıp kaydettikten sonra commitler birleştirilmiş olur.</p>
</section>
</main>
</body>
</html>
